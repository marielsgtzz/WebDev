/*! For license information please see 134.8d9aeb21.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunk_kentcdodds_react_fundamentals=self.webpackChunk_kentcdodds_react_fundamentals||[]).push([[134],{7134:function(e,n,s){s.r(n);var a=s(2556);function t(e){const n=Object.assign({h1:"h1",h2:"h2",p:"p",code:"code",pre:"pre",span:"span",ul:"ul",li:"li",a:"a",ol:"ol",em:"em",strong:"strong",h3:"h3"},e.components);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{children:"Rendering Arrays"}),"\n",(0,a.jsx)(n.h2,{children:"\ud83d\udcdd Your Notes"}),"\n",(0,a.jsxs)(n.p,{children:["Elaborate on your learnings here in ",(0,a.jsx)(n.code,{children:"src/exercise/07.md"})]}),"\n",(0,a.jsx)(n.h2,{children:"Background"}),"\n",(0,a.jsxs)(n.p,{children:["One of the more tricky things with React is the requirement of a ",(0,a.jsx)(n.code,{children:"key"})," prop when\nyou attempt to render a list of elements."]}),"\n",(0,a.jsx)(n.p,{children:"If we want to render a list like this, then there's no problem:"}),"\n",(0,a.jsx)(n.pre,{className:"language-jsx",children:(0,a.jsxs)(n.code,{className:"language-jsx",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ui ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n    "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"One"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n    "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"Two"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n    "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"Three"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n  "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.p,{children:"But rendering an array of elements is very common:"}),"\n",(0,a.jsx)(n.pre,{className:"language-jsx",children:(0,a.jsxs)(n.code,{className:"language-jsx",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," list ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token string",children:"'One'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token string",children:"'Two'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token string",children:"'Three'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n\n",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ui ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n    "}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"list",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"map"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token parameter",children:"listItem"})," ",(0,a.jsx)(n.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n      ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"listItem",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n  "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsx)(n.p,{children:"Those will generate the same HTML, but what it actually does is slightly\ndifferent. Let's re-write it to see that difference:"}),"\n",(0,a.jsx)(n.pre,{className:"language-jsx",children:(0,a.jsxs)(n.code,{className:"language-jsx",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," list ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"["}),(0,a.jsx)(n.span,{className:"token string",children:"'One'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token string",children:"'Two'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:","})," ",(0,a.jsx)(n.span,{className:"token string",children:"'Three'"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"]"}),"\n",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," listUI ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," list",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"map"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),(0,a.jsx)(n.span,{className:"token parameter",children:"listItem"})," ",(0,a.jsx)(n.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"listItem",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n",(0,a.jsx)(n.span,{className:"token comment",children:"// notice that listUI is an array"}),"\n",(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," ui ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"listUI",(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n"]})}),"\n",(0,a.jsx)(n.p,{children:"So we're interpolating an array of renderable elements. This is totally\nacceptable, but it has interesting implications for when things change over\ntime."}),"\n",(0,a.jsx)(n.p,{children:"If you re-render that list with an added item, React doesn't really know whether\nyou added an item in the middle, beginning, or end. And the same goes for when\nyou remove an item (it doesn't know whether that happened in the middle,\nbeginning, or end either)."}),"\n",(0,a.jsx)(n.p,{children:"In this example, it's not a big deal, because React's best-guess is right and it\nworks out ok. However, if any of those React elements represent a component that\nis maintaining state, that can be pretty problematic, which this exercise\ndemonstrates."}),"\n",(0,a.jsx)(n.h2,{children:"Exercise"}),"\n",(0,a.jsx)(n.p,{children:"Production deploys:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"http://react-fundamentals.netlify.app/isolated/exercise/07.js",children:"Exercise"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"http://react-fundamentals.netlify.app/isolated/final/07.js",children:"Final"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"We've got a problem. You may have already noticed the error message in the\nconsole about it. Try this:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:'Hit the "remove" button on the last list item'}),"\n",(0,a.jsx)(n.li,{children:"Notice that list item is now gone \ud83d\udc4d"}),"\n",(0,a.jsx)(n.li,{children:'Hit the "remove" button on the first list item'}),"\n",(0,a.jsx)(n.li,{children:"Notice that everything's mixed up! \ud83d\ude26"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Let me describe what's going on here."}),"\n",(0,a.jsxs)(n.p,{children:["Here's the TL;DR: Every React element accepts a special ",(0,a.jsx)(n.code,{children:"key"})," prop you can use\nto help React keep track of elements between updates. If you don't provide it\nwhen rendering a list, React can get things mixed up. The solution is to give\neach element a unique (to the array) ",(0,a.jsx)(n.code,{children:"key"})," prop, and then everything will work\nfine."]}),"\n",(0,a.jsx)(n.p,{children:"Let's dive in a little deeper:"}),"\n",(0,a.jsx)(n.p,{children:"If you re-render that list with an added item, React doesn't really know whether\nyou added an item in the middle, beginning, or end. And the same goes for when\nyou remove an item (it doesn't know whether that happened in the middle,\nbeginning, or end either)."}),"\n",(0,a.jsxs)(n.p,{children:["To be clear, ",(0,a.jsx)(n.em,{children:"we"})," know as the developer because we wrote the code, but as far as\nReact is concerned, we simply gave it some react elements before, we gave it\nsome after, and now React is trying to compare the before and after with no\nknowledge of how the elements got from one position to another."]}),"\n",(0,a.jsx)(n.p,{children:"Sometimes it's not a big deal, because React's best-guess is right and it works\nout ok. However, if any of those React elements represent a component that is\nmaintaining state (like the value of an input or focus state), that can be\npretty problematic, which this exercise demonstrates."}),"\n",(0,a.jsxs)(n.p,{children:["To solve this problem, we need to give React a hint so it can associate the old\nReact elements with the new ones we're giving it due to the change. We do this\nusing a special prop called the ",(0,a.jsx)(n.code,{children:"key"})," prop."]}),"\n",(0,a.jsxs)(n.p,{children:["In this exercise, we have a list of fruit that appear and can be removed. There\nis state that exists (managed by the browser) in the ",(0,a.jsx)(n.code,{children:"<input />"})," for each of the\nfruit: the input's ",(0,a.jsx)(n.code,{children:"value"})," (initialized via the ",(0,a.jsx)(n.code,{children:"defaultValue"})," prop)."]}),"\n",(0,a.jsxs)(n.p,{children:["Without a ",(0,a.jsx)(n.code,{children:"key"})," prop, for all React knows, you removed an input and gave another\nlabel different text content, which leads to the bug we'll see in the exercise."]}),"\n",(0,a.jsx)(n.p,{children:"So here's the rule:"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsxs)(n.strong,{children:["Whenever you're rendering an array of React elements, each one must have a\nunique ",(0,a.jsx)(n.code,{children:"key"})," prop."]})}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udcdc You can learn more about what can go wrong when you don't specify the ",(0,a.jsx)(n.code,{children:"key"}),"\nprop in my blog post\n",(0,a.jsx)(n.a,{href:"https://kentcdodds.com/blog/understanding-reacts-key-prop",children:"Understanding React's key prop"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udcdc Also, you can get a deeper understanding in this blog post:\n",(0,a.jsx)(n.a,{href:"https://epicreact.dev/why-react-needs-a-key-prop",children:"Why React needs a key prop"}),".\nThat'll give you a bit of what's going on under the hood, so I recommend reading\nthis!"]}),"\n",(0,a.jsxs)(n.p,{children:["\ud83d\udc28 The React elements we're rendering are the ",(0,a.jsx)(n.code,{children:"li"})," elements, so for this\nexercise, add a ",(0,a.jsx)(n.code,{children:"key"})," prop there. You can use the ",(0,a.jsx)(n.code,{children:"item.id"})," for the value to\nensure that the key value is unique for each element."]}),"\n",(0,a.jsx)(n.p,{children:"\ud83e\udd89 Note, the key only needs to be unique within a given array. So this works\nfine:"}),"\n",(0,a.jsx)(n.pre,{className:"language-tsx",children:(0,a.jsxs)(n.code,{className:"language-tsx",children:[(0,a.jsx)(n.span,{className:"token keyword",children:"const"})," element ",(0,a.jsx)(n.span,{className:"token operator",children:"="})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n  ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n    "}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"list",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token method function property-access",children:"map"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"listItem ",(0,a.jsx)(n.span,{className:"token arrow operator",children:"=>"})," ",(0,a.jsx)(n.span,{className:"token punctuation",children:"("}),"\n      ",(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"<"}),"li"]})," ",(0,a.jsx)(n.span,{className:"token attr-name",children:"key"}),(0,a.jsxs)(n.span,{className:"token script language-javascript",children:[(0,a.jsx)(n.span,{className:"token script-punctuation punctuation",children:"="}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"listItem",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token property-access",children:"id"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),(0,a.jsx)(n.span,{className:"token punctuation",children:"{"}),"listItem",(0,a.jsx)(n.span,{className:"token punctuation",children:"."}),(0,a.jsx)(n.span,{className:"token property-access",children:"value"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"li"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n    ",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),(0,a.jsx)(n.span,{className:"token punctuation",children:"}"}),(0,a.jsx)(n.span,{className:"token plain-text",children:"\n  "}),(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsxs)(n.span,{className:"token tag",children:[(0,a.jsx)(n.span,{className:"token punctuation",children:"</"}),"ul"]}),(0,a.jsx)(n.span,{className:"token punctuation",children:">"})]}),"\n",(0,a.jsx)(n.span,{className:"token punctuation",children:")"}),"\n"]})}),"\n",(0,a.jsxs)(n.p,{children:["\ud83e\udd89 In our example, the ",(0,a.jsx)(n.code,{children:"value"}),' of the input is managed by the browser, but this\nhas even bigger implications when we start working with our own state and\nside-effects. It\'s a little too early to demonstrate this for you, but you\nshould know that when React removes a component from the DOM, it gets\n"unmounted" which will trigger side-effect cleanups, and if new elements are\nadded then those will be "mounted" and will trigger your side-effects. This can\ncause some surprising and problematic issues for your users. So just remember\nthe rule and always provide a ',(0,a.jsx)(n.code,{children:"key"})," when rendering an array. Later when you have\nmore React experience, you can come back to this exercise and expand it a bit\nwith custom components that manage state and side-effects to observe the\nproblems caused when you ignore the ",(0,a.jsx)(n.code,{children:"key"}),"."]}),"\n",(0,a.jsx)(n.h2,{children:"Extra Credit"}),"\n",(0,a.jsx)(n.h3,{children:"1. \ud83d\udcaf Focus Demo"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"http://react-fundamentals.netlify.app/isolated/final/07.extra-1.js",children:"Production deploy"})}),"\n",(0,a.jsx)(n.p,{children:"\ud83d\udc28 For this extra credit, open the production deploy above."}),"\n",(0,a.jsxs)(n.p,{children:["You can observe that when we're talking about \"state\" we're also talking about\nkeyboard focus as well as what text is selected! As you play around with this,\ntry selecting text in the inputs and observe how the first two examples differ\nfrom the last one. You'll notice that using the array ",(0,a.jsx)(n.code,{children:"index"})," as a key is no\ndifferent from React's default behavior, so it's unlikely to fix issues if\nyou're having them. Best to use a unique ID. Play around with it! (Remember,\nyou'll find the source for this demo in the ",(0,a.jsx)(n.code,{children:"final"})," directory)."]}),"\n",(0,a.jsxs)(n.p,{children:["There are some other interesting things you can do with ",(0,a.jsx)(n.code,{children:"key"}),"s as well (like\nchanging them on an element to intentionally reset the state of a component).\nFeel free to play around with that if you like, but we'll be using that in a\nfuture workshop so look forward to it!"]}),"\n",(0,a.jsx)(n.h2,{children:"\ud83e\udd89 Feedback"}),"\n",(0,a.jsxs)(n.p,{children:["Fill out\n",(0,a.jsx)(n.a,{href:"https://ws.kcd.im/?ws=React%20Fundamentals%20%E2%9A%9B&e=07%3A%20Rendering%20Arrays&em=",children:"the feedback form"}),"."]})]})}n.default=function(e={}){const{wrapper:n}=e.components||{};return n?(0,a.jsx)(n,Object.assign({},e,{children:(0,a.jsx)(t,e)})):t(e)}},3238:function(e,n,s){var a=s(4519),t=Symbol.for("react.element"),c=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function r(e,n,s){var a,c={},r=null,h=null;for(a in void 0!==s&&(r=""+s),void 0!==n.key&&(r=""+n.key),void 0!==n.ref&&(h=n.ref),n)i.call(n,a)&&!l.hasOwnProperty(a)&&(c[a]=n[a]);if(e&&e.defaultProps)for(a in n=e.defaultProps)void 0===c[a]&&(c[a]=n[a]);return{$$typeof:t,type:e,key:r,ref:h,props:c,_owner:o.current}}n.Fragment=c,n.jsx=r,n.jsxs=r},2556:function(e,n,s){e.exports=s(3238)}}]);
//# sourceMappingURL=134.8d9aeb21.chunk.js.map